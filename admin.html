<script>
// ========== Ù†Ø¸Ø§Ù… Ù…Ø²Ø§Ù…Ù†Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ==========

// ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ù† Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­ÙƒÙ…
function loadSiteDataFromCMS() {
    try {
        // Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
        const siteData = JSON.parse(localStorage.getItem('webforgeSiteData') || '{}');
        if (siteData.siteTitle) {
            document.title = siteData.siteTitle;
        }
        if (siteData.siteDescription) {
            document.querySelector('meta[name="description"]').setAttribute('content', siteData.siteDescription);
        }
        if (siteData.heroText) {
            const heroP = document.querySelector('.hero p');
            if (heroP) heroP.textContent = siteData.heroText;
        }
        if (siteData.promoText) {
            const promoContent = document.querySelector('.promo-content');
            if (promoContent) promoContent.textContent = siteData.promoText;
        }
        
        // Ø§Ù„Ø®Ø¯Ù…Ø§Øª
        const servicesData = JSON.parse(localStorage.getItem('webforgeServices') || '{}');
        if (servicesData.youcanTitle) {
            const youcanTitle = document.querySelector('[data-translate="youcanTitle"]');
            if (youcanTitle) youcanTitle.textContent = servicesData.youcanTitle;
        }
        if (servicesData.youcanDesc) {
            const youcanDesc = document.querySelector('[data-translate="youcanDesc"]');
            if (youcanDesc) youcanDesc.textContent = servicesData.youcanDesc;
        }
        // Ù†ÙØ³ Ø§Ù„Ø´ÙŠØ¡ Ù„Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø®Ø¯Ù…Ø§Øª...
        
        // Ù…Ù…ÙŠØ²Ø§ØªÙ†Ø§
        const whyUsData = JSON.parse(localStorage.getItem('webforgeWhyUs') || '{}');
        if (whyUsData.speedTitle) {
            const speedTitle = document.querySelector('[data-translate="speedTitle"]');
            if (speedTitle) speedTitle.textContent = whyUsData.speedTitle;
        }
        // Ù†ÙØ³ Ø§Ù„Ø´ÙŠØ¡ Ù„Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª...
        
        // Ù…Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„
        const portfolioData = JSON.parse(localStorage.getItem('webforgePortfolio') || '{}');
        if (portfolioData.work1Title) {
            const work1 = document.querySelector('[data-translate="work1"]');
            if (work1) work1.textContent = portfolioData.work1Title;
        }
        if (portfolioData.work1Image) {
            const work1Img = document.querySelector('.work-card:nth-child(1) img');
            if (work1Img) work1Img.src = portfolioData.work1Image;
        }
        // Ù†ÙØ³ Ø§Ù„Ø´ÙŠØ¡ Ù„Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„...
        
        // Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©
        const faqData = JSON.parse(localStorage.getItem('webforgeFAQ') || '{}');
        if (faqData.faq1Q) {
            const faq1Q = document.querySelector('[data-translate="faq1"]');
            if (faq1Q) faq1Q.textContent = faqData.faq1Q;
        }
        if (faqData.faq1A) {
            const faq1A = document.querySelector('[data-translate="faq1a"]');
            if (faq1A) faq1A.textContent = faqData.faq1A;
        }
        // Ù†ÙØ³ Ø§Ù„Ø´ÙŠØ¡ Ù„Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©...
        
    } catch (error) {
        console.log('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
    }
}

// ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª
function updateVisitCounter() {
    let stats = JSON.parse(localStorage.getItem('webforgeStats') || '{"visits":0,"orders":0,"referrals":0,"gifts":0}');
    stats.visits = (stats.visits || 0) + 1;
    
    // Ø­ÙØ¸ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø²ÙŠØ§Ø±Ø©
    const visitsHistory = JSON.parse(localStorage.getItem('visitsHistory') || '[]');
    visitsHistory.unshift({ date: new Date().toISOString() });
    if (visitsHistory.length > 100) visitsHistory.pop();
    
    localStorage.setItem('webforgeStats', JSON.stringify(stats));
    localStorage.setItem('visitsHistory', JSON.stringify(visitsHistory));
}

// ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø·Ù„Ø¨Ø§Øª
function updateOrderStats() {
    let stats = JSON.parse(localStorage.getItem('webforgeStats') || '{"visits":0,"orders":0,"referrals":0,"gifts":0}');
    stats.orders = (stats.orders || 0) + 1;
    localStorage.setItem('webforgeStats', JSON.stringify(stats));
}

// ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª
function updateReferralStats() {
    let stats = JSON.parse(localStorage.getItem('webforgeStats') || '{"visits":0,"orders":0,"referrals":0,"gifts":0}');
    stats.referrals = (stats.referrals || 0) + 1;
    localStorage.setItem('webforgeStats', JSON.stringify(stats));
}

// ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§
function updateGiftStats() {
    let stats = JSON.parse(localStorage.getItem('webforgeStats') || '{"visits":0,"orders":0,"referrals":0,"gifts":0}');
    stats.gifts = (stats.gifts || 0) + 1;
    localStorage.setItem('webforgeStats', JSON.stringify(stats));
}

// ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø£ØµÙ„ÙŠØ©
const originalSubmitToWhatsApp = window.submitToWhatsApp;
window.submitToWhatsApp = function() {
    updateOrderStats();
    return originalSubmitToWhatsApp();
};

const originalSendReferral = window.sendReferral;
window.sendReferral = function() {
    updateReferralStats();
    return originalSendReferral();
};

const originalOpenGiftModal = window.openGiftModal;
window.openGiftModal = function() {
    updateGiftStats();
    return originalOpenGiftModal();
};

// Ø²Ø± Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹ Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­ÙƒÙ…
function addAdminQuickAccess() {
    // Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„: Ø£Ø¶Ù ?admin=123456 ÙÙŠ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø±Ø§Ø¨Ø·
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('admin') === '123456') {
        const adminBtn = document.createElement('a');
        adminBtn.href = 'admin.html';
        adminBtn.target = '_blank';
        adminBtn.style.cssText = `
            position: fixed;
            bottom: 180px;
            left: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            box-shadow: 0 5px 20px rgba(139, 92, 246, 0.4);
            border: 2px solid rgba(255,255,255,0.3);
            z-index: 9999;
            text-decoration: none;
            animation: pulse 2s infinite;
        `;
        adminBtn.innerHTML = '<i class="fas fa-cogs"></i>';
        adminBtn.title = 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…';
        document.body.appendChild(adminBtn);
        
        // Ø¥Ø¸Ù‡Ø§Ø± ØªÙ†Ø¨ÙŠÙ‡
        setTimeout(() => {
            alert('âœ… ØªÙ… ØªÙØ¹ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…\n\nØ§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: admin\nÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: webforge2026');
        }, 1000);
    }
}

// Ø§Ù„ØªÙ‡ÙŠØ¦Ø©
document.addEventListener('DOMContentLoaded', function() {
    // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹
    setTimeout(loadSiteDataFromCMS, 500);
    
    // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª
    updateVisitCounter();
    
    // Ø¥Ø¶Ø§ÙØ© Ø²Ø± Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹
    addAdminQuickAccess();
    
    // Ø§Ø®ØªØµØ§Ø± Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ (Ctrl + Alt + A)
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.altKey && e.key === 'a') {
            window.open('admin.html', '_blank');
        }
    });
});

// Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù„Ù„Ù…Ø§Ù„Ùƒ
console.log('ğŸš€ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­ÙƒÙ… Web Forge');
console.log('Ù„Ù„ÙˆØµÙˆÙ„: Ø£Ø¶Ù ?admin=123456 Ø¥Ù„Ù‰ Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹');
console.log('Ø£Ùˆ Ø§Ø¶ØºØ· Ctrl + Alt + A');
console.log('Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© ÙÙŠ localStorage');
</script>
